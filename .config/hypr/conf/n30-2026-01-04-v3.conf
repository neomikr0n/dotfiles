# ----------------------------------------------------- 
#█▄░█ ▒▄▀▀▄ ▒▄▀▀▄ 
#█░▀█ ░░▒▀▌ ▒█▄▀█ 
#▀░░▀ ▒▀▄▄▀ ▒▀▄▄▀ 

# Be sure to add to the last line of hyprland.conf:
# source = ~/.config/hypr/conf/n30.conf
# ----------------------------------------------------- 
#█▀▀ █▄░█ ▐▌░▐▌ ▀ █▀▀▄ ▄▀▄ █▄░▄█ █▀▀ █▄░█ ▀█▀ ▄▀▄ █░░ 
#█▀▀ █░▀█ ░▀▄▀░ █ █▐█▀ █░█ █░█░█ █▀▀ █░▀█ ░█░ █▀█ █░▄ 
#▀▀▀ ▀░░▀ ░░▀░░ ▀ ▀░▀▀ ░▀░ ▀░░░▀ ▀▀▀ ▀░░▀ ░▀░ ▀░▀ ▀▀▀ 
# ----------------------------------------
#monitor=DP-2,3440x1440@240.09,auto,1, bitdepth, 10, cm, srgb
monitor=DP-2,3440x1440@240.09,auto,1
#HDR tho
#monitor=DP-2,3440x1440@240.09,auto,1, bitdepth, 10, cm, auto, sdrbrightness, 1, sdrsaturation, 1

# --- SECCIÓN DE ARRANQUE SEGURO ---
# Primero, asegurar que las variables de Wayland existan para el sistema
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=Hyprland
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Gnome Keyring y Portales (Orden vital)
exec-once = /usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh
exec-once = systemctl --user mask xdg-desktop-portal-gnome # Evita el lag de Thunar

# --- VARIABLES DE ENTORNO (Limpias y al grano) ---
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_QPA_PLATFORMTHEME,qt6ct
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = QSG_RHI_BACKEND,opengl

# Optimización para Mesa-Git y DankMaterial
env = QSG_RHI_BACKEND,opengl
env = QML_DISABLE_DISK_CACHE,1

# FOR DEBUGGING:
#env= HYPRLAND_LOG_WLR,1
#env= HYPRLAND_TRACE,1
#env= AQ_TRACE,1

input {
    kb_layout = latam
    kb_variant = 
    follow_mouse = 1
    numlock_by_default = true

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    force_no_accel = 0
}

misc {
    vrr = 0
    allow_session_lock_restore = 1  # for compatibility?
    session_lock_xray = 1           # for video mvpaper + hyprlock?
}

general {
    gaps_in = 0
    gaps_out = 0,0,0,0,
    border_size = 2
    #col.active_border = $color11
    col.inactive_border = rgba(255,255,155,0)
}

animations {
    enabled = true
    bezier = linear, 0, 0, 1, 1
    bezier = md3_standard, 0.2, 0, 0, 1
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    bezier = md3_accel, 0.3, 0, 0.8, 0.15
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    bezier = crazyshot, 0.1, 1.5, 0.76, 0.92
    bezier = hyprnostretch, 0.05, 0.9, 0.1, 1.0
    bezier = fluent_decel, 0.1, 1, 0, 1
    bezier = easeInOutCirc, 0.85, 0, 0.15, 1
    bezier = easeOutCirc, 0, 0.55, 0.45, 1
    bezier = easeOutExpo, 0.16, 1, 0.3, 1
    animation = windows, 1, 3, md3_decel, popin 60%
    animation = border, 1, 10, default
    animation = fade, 1, 2.5, md3_decel
    animation = workspaces, 1, 3.5, easeOutExpo, slide
    animation = specialWorkspace, 1, 3, md3_decel, slidevert
}

experimental {
    #wide_color_gamut = true
    #xx_color_management_v4 = false
}

debug {
    disable_logs = false
}

render {
    cm_fs_passthrough = 2
}

#  ▐▌░▐▌ ▄▀▄ █▀▀▄ ▀ ▄▀▄ █▀▄ █░░ █▀▀ ▄▀▀ 
#  ▀▄▀░ █▀█ █▐█▀ █ █▀█ █▀█ █░▄ █▀▀ ░▀▄ 
# ░▀░░ ▀░▀ ▀░▀▀ ▀ ▀░▀ ▀▀░ ▀▀▀ ▀▀▀ ▀▀░ 
# ----------------------------------------
$files= Thunar
#$files= dolphin
#$browser= firedragon
$browser= zen-browser
$whatsapp= zapzap
#$music= spotify-adblock
$music= tidal-hifi
#$music= high-tide
#$music= cider
$term= kitty
$editor= antigravity
$mainMod = SUPER
$soundsDir = ~/dotfiles/share/sounds/
$scriptsDir = ~/dotfiles/share/scripts/


# █░░░█ ▄▀▄ █░░ █░░ █▀▄ ▄▀▄ █▀▄ █▀▀ █▀▀▄ 
# █░█░█ █▀█ █░▄ █░▄ █░█ █▀█ █░█ █▀▀ █▐█▀ 
# ░▀░▀░ ▀░▀ ▀▀▀ ▀▀▀ █▀░ ▀░▀ █▀░ ▀▀▀ ▀░▀▀ 
# ----------------------------------------------------- 
# WALLPAPER ENGINE CONFIGURATION (mpvpaper)
# ----------------------------------------------------- 
# Path Settings
$w_dir  = ~/dotfiles/share/wallpapers
$w_file = yellowmatrix.mp4
$w_path = $w_dir/$w_file

# Rendering Backend & Process Control
# QSG_RHI_BACKEND=opengl ensures compatibility with Mesa-Git on RDNA4
$w_backend = QSG_RHI_BACKEND=opengl nohup
$w_cleanup = killall -9 mpvpaper gslapper 2>/dev/null

# Monitor Detection (Dynamic)
# Uses jq to target the primary monitor automatically
$w_monitor = $(hyprctl monitors -j | jq -r '.[0].name')

# Image Adjustments (Brightness, Saturation, Gamma)
$w_visuals = --loop --gamma=-5 --contrast=88 --saturation=79 --brightness=1 --mute=yes --video-unscaled=no --panscan=1

# Hardware Acceleration (VA-API for AMD RX 9070)
$w_hardware = --hwdec=vaapi --vo=gpu --gpu-context=wayland

# ----------------------------------------------------- 
# EXECUTION
# ----------------------------------------------------- 
# 1. Clean up existing instances
# 2. Short delay to allow the video driver to settle
# 3. Launch mpvpaper with hardware acceleration and disown the process
exec = $w_cleanup; sleep 2; $w_backend mpvpaper -o "$w_hardware $w_visuals" $w_monitor $w_path > /dev/null 2>&1 & disown

# UN COMANDO PARA DOMINARLOS A TODOS:
#exec= killall -9 mpvpaper gslapper 2>/dev/null; sleep 1; QSG_RHI_BACKEND=opengl nohup mpvpaper -o "hwdec=vaapi vo=gpu --loop --gamma=-5 --contrast=88 --saturation=79 --brightness=1 --mute=yes --video-unscaled=no --panscan=1" $(hyprctl monitors -j | jq -r '.[0].name') ~/dotfiles/share/wallpapers/yellowmatrix.mp4 > /dev/null 2>&1 & disown

# EXPERIMENTAL:
#exec= linux-wallpaperengine 3299228616 ;experimental
#exec= gslapper -vs -o $GstreamerOptions DP-2 $wallpaperDir/$wallpaperFile  ;experimental, not working as v1.0.0-1 

# █▀▄ ▀ █▄░█ █▀▄ ▄▀▀ 
# █▀█ █ █░▀█ █░█ ░▀▄ 
# ▀▀░ ▀ ▀░░▀ ▀▀░ ▀▀░ 
# ----------------------------------------
bind = $mainMod, RETURN, exec, kitty
bind = $mainMod CTRL, RETURN, exec, dms ipc call spotlight toggle

# SCREENSHOT
bind = , F7, exec, flameshot full --clipboard --path ~/Imágenes/Screenshots/ss_$(date +%Y-%m-%d_%H-%M_%S)_garuda.jpeg ;Screenshot fullscreen
bind= $mainMod, F7, exec, flameshot gui --clipboard --path ~/Imágenes/Screenshots/ss_$(date +%Y-%m-%d_%H-%M_%S)_garuda.jpeg ;Screenshot partial
bind= $mainMod Control_R, F7, exec, flameshot full --clipboard --path ~/Imágenes/Screenshots/ss_$(date +%Y-%m-%d_%H-%M_%S)_garuda.png ;Screenshot partial PNG

#bind= $mainMod ,W,exec, pkill -SIGUSR1 waybar && pgrep dynisland >/dev/null && dynisland kill || dynisland daemon #Toggle hide/show waybar + dynisland
#bind= $mainMod ,W,exec, pkill -SIGUSR1 waybar
bind= $mainMod ,W,exec, dms ipc call bar toggle index 0

# ddccontrol monitor Brightnesss-------------------
#bindr = , F1, exec, ddccontrol -r 0x10 -W -10 dev:/dev/i2c-11 &&  osd-client --brightness lower
#bindr = , F2, exec, ddccontrol -r 0x10 -W 10 dev:/dev/i2c-11 && swayosd-client --brightness raise
bindr = $mainMod CTRL_R, F1, exec, ddccontrol -r 0x10 -w 40 dev:/dev/i2c-11 && swayosd-client --brightness lower & hyprshade toggle blue-light-filter
bindr = $mainMod CTRL_R, F2, exec, ddccontrol -r 0x10 -w 100 dev:/dev/i2c-11 && swayosd-client --brightness raise &  hyprshade toggle blue-light-filter
# volume control OSD------------------------------------
binde = , xf86audioraisevolume, exec, swayosd-client --output-volume raise
binde = , xf86audiolowervolume, exec, swa yosd-client --output-volume lower
bind = , XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindr = , KEY_CAPSLOCK, exec, swayosd-client --caps-lock
#bindr= ALT,Alt_L, exec, swayos-clientd --caps-lock
#bind= KEY_CAPSLOCK,l, exec, $test

# 
binde = $mainMod SHIFT, right, resizeactive, 100 0# Increase window width 
binde = $mainMod SHIFT, left, resizeactive, -100 0# Reduce window width 
binde = $mainMod SHIFT, down, resizeactive, 0 100# Increase window height 
binde = $mainMod SHIFT, up, resizeactive, 0 -100# Reduce window height    

# Move window with mainMod + shift + arrow keys
bind = $mainMod CTRL SHIFT, left, movewindow, l
bind = $mainMod CTRL SHIFT, right, movewindow, r
bind = $mainMod CTRL SHIFT, up, movewindow, u
bind = $mainMod CTRL SHIFT, down, movewindow, d

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = ALT, 1, movetoworkspacesilent, 1
bind = ALT, 2, movetoworkspacesilent, 2
bind = ALT, 3, movetoworkspacesilent, 3
bind = ALT, 4, movetoworkspacesilent, 4
bind = ALT, 5, movetoworkspacesilent, 5
bind = ALT, 6, movetoworkspacesilent, 6
bind = ALT, 7, movetoworkspacesilent, 7
bind = ALT, 8, movetoworkspacesilent, 8
bind = ALT, 9, movetoworkspacesilent, 9
bind = ALT, 0, movetoworkspacesilent, 10

bind= $mainMod CTRL,right,exec, hyprctl dispatch workspace e+1 ; play -v 0.1 "$soundsDir/gravity/change_workspace.wav"
bind= $mainMod CTRL,left,exec, hyprctl dispatch workspace e-1 ; play -v 0.1 "$soundsDir/gravity/change_workspace.wav"

# Scratchpad
bind= ALT,bar,movetoworkspacesilent,special
bindr = $mainMod, $mainMod_L, togglespecialworkspace,

#█▀▀▄ █░█ █░░ █▀▀ ▄▀▀ 
#█▐█▀ █░█ █░▄ █▀▀ ░▀▄ 
#▀░▀▀ ░▀░ ▀▀▀ ▀▀▀ ▀▀░ 
# ----------------------------------------
# windowrule= opacity 0.85 0.85,dolphin
windowrule {
  name = windowrule-1
  opacity = 0.6 0.1
  match:class = Calculator
}

windowrule {
  name = windowrule-2
  opacity = 0.40 0.20
  float = on
  size = 700 380
  move = (990) (990)
  match:class = org.gnome.Calculator
}

windowrule {
  name = windowrule-3
  opacity = 0.75 0.75
  match:class = org.kde.dolphin
}

windowrule {
  name = windowrule-4
  opacity = 0.55 0.55
  match:class = $browser
}

windowrule {
  name = windowrule-5
  opacity = 0.99 0.55
  match:class = brave
}

windowrule {
  name = windowrule-6
  opacity = 0.85 0.75
  match:class = $term
}

windowrule {
  name = windowrule-7
  opacity = 0.70 0.70
  match:class = Thunar
}

windowrule {
  name = windowrule-8
  opacity = 0.70 0.50
  match:class = whatsapp-for-linux
}

windowrule {
  name = windowrule-9
  opacity = 0.80 0.80
  match:class = whatsie
}

windowrule {
  name = windowrule-10
  opacity = 0.85 0.85
  match:class = whatsapp-nativefier
}

windowrule {
  name = windowrule-11
  opacity = 0.85 0.85
  match:class = com.rtosta.zapzap
}

windowrule {
  name = windowrule-12
  opacity = 0.75 0.65
  match:class = wasistlos
}

windowrule {
  name = windowrule-13
  opacity = 0.85 0.85
  match:class = discord
}

windowrule {
  name = windowrule-14
  opacity = 0.55 0.55
  match:class = GSK_RENDERER=gl DEBUG=1 easyeffects
}

windowrule {
  name = windowrule-15
  opacity = 0.85 0.85
  match:class = nz.co.mega.megasync
}

windowrule {
  name = windowrule-16
  opacity = 0.90 0.90
  match:class = pavucontrol
}

windowrule {
  name = windowrule-17
  opacity = 0.55 0.33
  match:class = ktimer
}

windowrule {
  name = windowrule-18
  opacity = 0.25 0.11
  match:class = konsole
}

windowrule {
  name = windowrule-19
  opacity = 0.50 0.50
  match:class = tidal-hifi
}

windowrule {
  name = windowrule-20
  opacity = 0.80 0.80
  match:class = luna
}

windowrule {
  name = windowrule-21
  opacity = 0.80 0.70
  match:class = code-oss
}

windowrule {
  name = windowrule-22
  opacity = 0.90 0.75
  match:class = code
}

windowrule {
  name = windowrule-23
  opacity = 0.70 0.70
  match:class = $editor
}

windowrule {
  name = windowrule-24
  opacity = 0.35 0.35
  match:title = ^(Genymotion)$
}

windowrule {
  name = windowrule-25
  opacity = 0.35 0.35
  match:class = ^(nz.co.mega.megasync)$
}

windowrule {
  name = windowrule-26
  opacity = 0.80 0.70
  match:class = MEGAsync
}

windowrule {
  name = windowrule-27
  opacity = 0.95 0.85
  match:class = Spotify
}

windowrule {
  name = windowrule-28
  opacity = 0.80 0.80
  match:class = qdirstat
}

windowrule {
  name = windowrule-29
  opacity = 0.80 0.80
  match:class = qBittorrent
}

windowrule {
  name = windowrule-30
  opacity = 0.80 0.80
  match:class = org.qbittorrent.qBittorrent
}

windowrule {
  name = windowrule-31
  opacity = 0.99 0.99
  match:class = steam_app_*3 # Path of exile
}

windowrule {
  name = windowrule-32
  opacity = 0.5 0.6
  match:class = ^(awakened-poe-trade)$
}

windowrule {
  name = windowrule-33
  opacity = 0.9 0.6
  match:class = ^([Rr]ofi)$
}

windowrule {
  name = windowrule-34
  opacity = 0.9 0.6
  match:class = ^([Ss]afe[Ee]yes)$
}


# Updates
#windowrule = move 2 738, class:^(*dotfiles-floating*)$
windowrule {
  name = windowrule-35
  move = (2) (738)
  match:class = dotfiles-floating
}


# Calculator
windowrule {
  name = windowrule-36
  float = on
  match:class = ^(*org.kde.kalk*)$
}

windowrule {
  name = windowrule-37
  opacity = 0.35 0.25
  match:class = kalk
}

windowrule {
  name = windowrule-38
  size = 150 276
  move = (2141) (121)
  match:class = ^(org.kde.kalk)$
}


# Gnome Calculator
#windowrulev2 = float, move 2458 61, class:^(org.gnome.Calculator)$
#windowrule = size 380 616, class:^(org.gnome.Calculator)$
#windowrule = size 400 650, class:^(org.gnome.Calculator)$
#windowrule = move 2458 61, class:^(org.gnome.Calculator)$

# Browser Picture in Picture
windowrule {
  name = windowrule-39
  float = on
  pin = on
  move = (0) (885)
  size = 982 553
  match:title = ^(Picture-in-Picture)$
}

#windowrule = move 69.67% 59.1%, title:^(Picture-in-Picture)$
#windowrule = move 2455 885, title:^(Picture-in-Picture)$

# Browser Spotify's mini player:
windowrule {
  name = windowrule-40
  float = on
  pin = on
  move = (2159) (-8)
  match:class = ^(Chromium-browser)$
}

windowrule {
  name = windowrule-41
  border_size = 0
  opacity = 0.95 0.95
  rounding = 40
  size = 625 56
  match:class = Chromium-browser
}

windowrule {
  name = windowrule-42
  border_size = 0
  match:class = steam_app_2399830
}

#windowrule = General:col.inactive_border 0, class:Chromium-browser
windowrule {
  name = windowrule-43
  border_size = 0
  match:class = zen
}


# dynisland
windowrule {
  name = windowrule-44
  border_size = 0
  match:class = ^(dynisland-daemon)$
}

windowrule {
  name = windowrule-45
  border_size = 0
  match:class = ^(dynisland)$
}

windowrule {
  name = windowrule-46
  border_size = 0
  move = (3345) (49)
  match:class = dynisland
}

windowrule {
  name = windowrule-47
  border_size = 0
  match:title = dynisland
}

#windowrule = float, class:dynisland
#windowrule = opacity 0.75 0.75, class:dynisland
#windowrule = size 420 698, class:dynisland
#windowrule = move 2345 49, class:dynisland

# Browser Bitwarden
windowrule {
  name = windowrule-48
  float = on
  match:title = (Extensi.*)
}

windowrule {
  name = windowrule-49
  float = on
  match:title = (.*Bitwarden.*)
}


windowrule {
  name = windowrule-50
  size = 420 698
  move = (2345) (49)
  match:title = ^(.*Bitwarden.*)$
}


windowrule {
  name = windowrule-51
  opacity = 0.79 0.75
  match:class = $music
}


# Application Not Responding (wait or terminate) size: 436,189...at: 2980,60 size: 537,189
windowrule {
  name = windowrule-52
  move = (2900) (60)
  match:class = ^(hyprland-dialog)$
}


# Unlock Keyring at: 1387,642 size: 666,155
#windowrule = move 2900 250, class:^(gcr-prompter)$

# Steam special offers size:706,830, at: 937,329
windowrule {
  name = windowrule-53
  move = (937) (60)
  match:title = ^(.*Special Offers:.*)$
}


# Vscode dialog "Open File:"
windowrule {
  name = windowrule-54
  float = on
  match:title = (Open File)
}


# Copiando — Dolphin: at: 1518,622	size: 404,196
#windowrule = move 1518,622, title:^(.*Copiando — Dolphin*)$
# El archivo ya existe — Dolphin: at: 1479,675 size: 610,138
#   windowrule = move 1479,819, title:^(.*El archivo ya existe — Dolphin*)$

#▄▀▀ █▀▄ ▄▀▄ █░░░█ █▄░█ 
#░▀▄ █░█ █▀█ █░█░█ █░▀█ 
#▀▀░ █▀░ ▀░▀ ░▀░▀░ ▀░░▀ 
# ----------------------------------------

# Spawn scratchpad terminals:
#exec-once= [workspace special silent] easyeffects
exec-once = bash -c "sleep 25s && hyprctl dispatch exec '[workspace special silent] $music'"
exec-once= [workspace special silent] $term -e -o font_size=10 btop
# exec-once= [workspace special silent] $term -e glava
# exec-once = [workspace special silent] kitty --title cava -e cava

# exec-once= [workspace 1 silent] $term hollywood ;too much cpu :'(

windowrule {
  name = windowrule-55
  workspace = 1 silent
  match:class = ^(wasistlos)$
}

#exec-once= hyprctl dispatch exec [workspace 2 silent] 'foot --title garuda-update garuda-update'
exec-once = bash -c "sleep 5; hyprctl dispatch exec '[workspace 3 silent] $files'"
#exec-once = bash -c "sleep 5; hyprctl dispatch exec '[workspace 3 silent] Thunar'"
exec-once= [workspace 5 silent] copyq
exec-once= [workspace 5 silent] ksnip
exec-once= [workspace 5 silent] corectrl
exec-once= [workspace 6 silent] megasync
#exec-once= [workspace 6 silent] qbittorrent

# Opens browser and whatsapp with a delay because it boots god damn fast! internet connection has to catch up! lol
exec-once = bash -c "sleep 20s && hyprctl dispatch exec '[workspace special silent] steam'"
exec-once = sleep 22s && hyprctl dispatch movetoworkspacesilent 1, class:steam
exec-once= hyprctl dispatch workspace 2
exec-once= sleep 10s && hyprctl dispatch exec "[workspace 1 silent]" QT_QUICK_BACKEND=software $whatsapp 
exec-once= sleep 7s && hyprctl dispatch exec "[workspace 2 silent]" $browser
exec-once = sleep 3s && hyprctl dispatch exec "[workspace 2 silent]" $editor
#exec-once = sleep 20s && dynisland daemon ; the cute bar on the top left for music visualitation


#▀█▀ █▀▀ ▄▀▀ ▀█▀ ▀ █▄░█ ▄▀▀░ 
#░█░ █▀▀ ░▀▄ ░█░ █ █░▀█ █░▀▌ 
#░▀░ ▀▀▀ ▀▀░ ░▀░ ▀ ▀░░▀ ▀▀▀░ 
# ----------------------------------------
exec-once = wl-paste --type text --watch cliphist store # clipboard store text data
# exec-once = wl-paste --type image --watch cliphist store # clipboard store image data

#exec= sudo mkdir -p /run/media/n30/nvme_chivos/ && sudo mount /dev/nvme0n1p4 /run/media/n30/nvme_chivos/

#exec = rclone mount "koofr:/koofr/Autosync" /home/n30/Autosync/ --vfs-cache-mode full && disown
exec-once = bash -c "sleep 10; rclone mount 'koofr:/koofr/Autosync' /home/n30/Autosync/ --vfs-cache-mode full &"
#1exec-once = swayosd-server
exec = ddccontrol -r 0x10 -w 100 dev:/dev/i2c-110

# notification toggle
bind = $mainMod, N, exec, swaync-client -t -sw
#exec-once = swaync

# lock session| 
bind = SUPER, L, exec, $scriptsDir/screenlock.sh 

# kill mpvpaper
bind = $mainMod CTRL ALT, W, exec, killall mpvpaper

# kill Ark Ascended
bind = $mainMod CTRL ALT, A, exec, pkill -9 -i -f "ArkAscended|ShooterGame"

windowrule {
  name = windowrule-56
  opacity = 0.80
  match:class = ^(com.mitchellh.ghostty)$
}



# Zoom
bind = $mainMod CTRLx, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
bind = $mainMod, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')

binde = $mainMod, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
binde = $mainMod, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
binde = $mainMod, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
binde = $mainMod, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')

bind = $mainMod SHIFT, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, minus, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, 0, exec, hyprctl -q keyword cursor:zoom_factor 1

# GAME MODE
exec = $HOME/dotfiles/share/scripts/auto-game-mode.sh &
exec-once = /home/n30/dotfiles/share/scripts/mangohud-song.sh &

# io.github.slgobinath.SafeEyes:
windowrule {
  name = windowrule-57
  float = on
  pin = on
  move = (1444) (-11)
  border_size = 0
  opacity = 0.85 0.85
  rounding = 40
  size = 600 122
  match:class = io.github.slgobinath.SafeEyes
}


# overwriting dank shell defaults:
windowrule {
  name = windowrule-58
  tile = on
  match:class = ^(steam)$
}

bind = ALT,Tab,cyclenext                    # Cycle between windows
bind = ALT,Tab,bringactivetotop             # Bring h.active window to the top
bind = $mainMod, G, togglegroup              # Toggle window group

exec-once = bash -c "sleep 3; QSG_RHI_BACKEND=opengl dms run"
exec-once = safeeyes